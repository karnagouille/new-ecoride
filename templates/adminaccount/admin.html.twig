{% extends 'base.html.twig' %}

{% block title %}Covoiturage
{% endblock %}

{% block body %}


	{% block stylesheets %}
		{{ parent() }}
		<link rel="stylesheet" href="{{ asset('css/style.css') }}">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap" rel="stylesheet">
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
		<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
	{% endblock %}

	{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
	{% endblock %}
	<header>
		<nav class="container titleshadow">
			<div>
				<a href="{{ path('home') }}" class="decoration navlink">Accueil</a>
			</div>
			<div>
				<a href="{{ path('searchcarpool') }}" class="decoration navlink">Covoiturage</a>
			</div>
			<div>
				<a href="#" class="decoration navlink">Contact</a>
			</div>
			{% if is_granted('ROLE_ADMIN') %}
            <div><a href="{{ path('admin') }}" class="decoration navlink">Admin</a></div>
            {% endif %}

			{% if app.user %}
				<div>
					<a href="{{ path('app_logout') }}" class="decoration navlink">Déconnexion</a>
				</div>
			{% else %}
				<div>
					<a href="{{ path('app_login') }}" class="decoration navlink">Connexion</a>
				</div>
			{% endif %}
		</nav>

{{ form_start(form) }}
{{ form_row(form.email) }}
<button type="submit" class="btn btn-primary">Rechercher </button> 
{{ form_end(form) }}




<table class="table table-hover table-dark">
    <thead>
        <tr>
            <th scope="col">ID</th>
            <th scope="col">Nom</th>
            <th scope="col">Prénom</th>
            <th scope="col">Adresse-Mail</th>
            <th scope="col">Activer/Désactiver</th>
        </tr>
    </thead>
    <tbody>
    {% for user in users %}
        <tr>
            <th scope="row">{{ user.id }}</th>
            <td>{{ user.lastname }}</td>
            <td>{{ user.name }}</td>
            <td>{{ user.email }}</td>

            <td>
                <form method="post">
					<input type="hidden" name="toggle_user_id" value="{{ user.id }}">
					<div class="form-check form-switch">
						<input class="form-check-input" type="checkbox" onchange="this.form.submit()"
							{% if user.isActive %}checked{% endif %}>
						<label class="form-check-label">
							{% if user.isActive %}Activer{% else %}Désactiver{% endif %}
						</label>
                    </div>
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>


<div><a href="{{ path('admin_form') }}" type="button" class="btn btn-primary">Ajoutez un compte</a></div>

<br>
<div class="canvas">
	<div>
		<label for=""><u><strong>NOMBRE DE COVOITURAGE PAR JOURS</strong></u></label>
		<canvas <canvas id="myChartsTrajets"  width="700" height="500" style="background-color: #2c2c2cff; border-radius: 10px;"></canvas>
	</div>
	<div>
		<label for=""><u><strong>NOMBRE DE CREDIT PAR JOURS</strong></u></label>
		<canvas id="myChartsCredits" width="700" height="500"  style="background-color: #2c2c2cff; border-radius: 10px;"></canvas>
	</div>
</div>



<script src="{{ asset('script/main.js') }}"></script>

		
		{% endblock %}